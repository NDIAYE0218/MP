<div class="corps">
  <h1 style="text-align: center">Les marchés dont l'échéance es proche</h1>
  <br>
  <table mat-table [dataSource]="marches">
    <ng-container matColumnDef="NumMarche">
      <th mat-header-cell *matHeaderCellDef>N° du marché&nbsp;</th>
      <td mat-cell *matCellDef="let element">
        <span *ngIf="element.NumMarche.toString().length===1">{{element.An}}-00{{element.NumMarche}}</span>
        <span *ngIf="element.NumMarche.toString().length===2">{{element.An}}-0{{element.NumMarche}}</span>
        <span *ngIf="element.NumMarche.toString().length===3">{{element.An}}-{{element.NumMarche}}</span>
      </td>
    </ng-container>

    <ng-container matColumnDef="objet">
      <th mat-header-cell *matHeaderCellDef>Objet&nbsp;</th>
      <td mat-cell *matCellDef="let element"> {{element.objet}}&nbsp; </td>
    </ng-container>
    <ng-container matColumnDef="dte_not">
      <th mat-header-cell *matHeaderCellDef>Date alerte&nbsp;</th>
      <td mat-cell *matCellDef="let element">{{getDate(element.DateNotific)}}&nbsp;</td>
    </ng-container>
    <ng-container matColumnDef="dte_deb">
      <th mat-header-cell *matHeaderCellDef>Date de notification&nbsp;</th>
      <td mat-cell *matCellDef="let element">{{getDate(element.Date_debut)}}&nbsp;</td>
    </ng-container>
    <ng-container matColumnDef="dte_cre">
      <th mat-header-cell *matHeaderCellDef>Date de creation&nbsp;</th>
      <td mat-cell *matCellDef="let element">{{getDate(element.Datecreation)}}&nbsp;</td>
    </ng-container>
    <ng-container matColumnDef="dte_clo">
      <th mat-header-cell *matHeaderCellDef>Date de cloture&nbsp;</th>
      <td mat-cell *matCellDef="let element;let i=index" style="background-color: tomato; color: white"><b>{{getDate(element.D_clot)}}&nbsp;</b></td>
    </ng-container>
    <ng-container matColumnDef="duree">
      <th mat-header-cell *matHeaderCellDef>Durée initiale&nbsp;</th>
      <td mat-cell *matCellDef="let element">{{element.D_init}}&nbsp;</td>
    </ng-container>
    <ng-container matColumnDef="tot_recond">
      <th mat-header-cell *matHeaderCellDef>Nbre de reconduction</th>
      <td mat-cell *matCellDef="let element"><b>{{element.Nbr_reconduction}}&nbsp;</b></td>
    </ng-container>
    <ng-container matColumnDef="duree_total">
      <th mat-header-cell *matHeaderCellDef>Durée totale&nbsp;</th>
      <td mat-cell *matCellDef="let element">{{element.D_tot}}&nbsp;</td>
    </ng-container>
    <ng-container matColumnDef="act">
      <th mat-header-cell *matHeaderCellDef class="mat-column-right">Actions</th>
      <td mat-cell *matCellDef="let element" class="mat-column-right">
        <button mat-button color="primary" routerLink="/marches/{{element.An}}-{{element.NumMarche}}">
          <mat-icon>remove_red_eye</mat-icon>
        </button>
        <button mat-button color="accent" routerLink="/marches/avenant/{{element.An}}-{{element.NumMarche}}" *ngIf="droit>=2">
          <mat-icon>create</mat-icon>
        </button>
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="ColumnsDates"></tr>
    <tr mat-row *matRowDef="let row; columns: ColumnsDates;"></tr>
  </table>
</div>